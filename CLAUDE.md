# 🤖 CLAUDE.md - 最初に読むファイル

## 📌 このファイルの役割
新しいチャットセッション開始時、必ずこのファイルを読んでください。
開発の進め方、現在の状況、注意事項がすべてここにあります。

## 🚀 現在の状況
**食事記録UI完成・本番稼働中** - FoodLogScreen.swift
- ✅ 本番環境に切り替え済み（2025-08-10）
- 紫ボタン削除、メインボタンが新UIに
- SaveViewDebugは旧版として残存

## 💡 開発方針

### Vertical Slice（縦切り）開発
```
❌ 間違い: データ層全部 → UI層全部 → やっと動く
✅ 正解: 1機能を完全に動かす → 次の機能 → 積み重ね
```

### 極小スライス（15-20分単位）
- 1スライス = 10-20行のコード
- エラーが出てもすぐ特定可能
- 常に動く状態を維持

### 実装例
```
Slice 1: 固定リスト表示（15分）
Slice 2: スワイプ削除（15分）
Slice 3: 追加ボタン（15分）
→ 各段階で完全動作
```

## 📁 重要ファイル構成

### 現在作業中
- `ios/pfcz/FoodLogScreen.swift` - 新UI開発中
- `ios/pfcz/SaveViewDebug.swift` - 現在の本番（後で置き換え）

### 議事録・ドキュメント
- `議事録/将来の拡張計画メモ.md` - 今後の実装アイデア
- `ios/開発議事録_UI改善_2025-08-09.md` - 現在の作業記録

### データ管理
- `ios/pfcz/FoodEntryStore.swift` - 食事データ管理
- `ios/pfcz/FoodStore.swift` - 食材マスタ

## ⚠️ 重要な注意事項

### 1. 今後の実装アイデアは別管理
- 思いついたアイデア → `議事録/将来の拡張計画メモ.md`に追記
- 今すぐやらない理由も明記する

### 2. UIアニメーションは後回し
- 機能優先、見た目は後
- アニメーション沼にハマらない

### 3. 既存機能を壊さない
- SaveViewDebugは本番で動いている
- 新UIは別画面で開発中（紫ボタン）

### 4. コミット時の注意
- AI分析とローカル保存は別機能
- Rails backendはAI分析のみ使用

## 📝 Todoリスト（優先順）

### 実装済み ✅
- [x] 基本表示・削除・保存
- [x] お気に入り6個表示（グリッド配置）
- [x] 自然な単位表示（個/g/ml/パック）
- [x] タップで加算
- [x] 左スワイプで減算
- [x] インライン編集（数値直接入力）
- [x] キーボードツールバー（±ボタン）
- [x] フォーカス管理と値検証
- [x] 使用頻度でソート（画面表示時のみ）
- [x] PFCバランス表示（1行）
- [x] クイック調整ボタン（±）左側配置
- [x] 桁数に応じた自動調整量

### 次の実装 🔄
- [ ] OCR/バーコード機能統合
- [ ] 時間帯別デフォルト
- [ ] 過去の記録閲覧

### 将来実装 📅
- [ ] カードスタックアニメーション
- [ ] 時間帯別デフォルト
- [ ] 栄養素24項目対応

## 🎯 最終ゴール
1. FoodLogScreenが完成
2. SaveViewDebugと置き換え
3. OCR/バーコード機能を統合

## 💬 口調・スタイル
- 簡潔に（4行以内）
- コード > 説明
- 絵文字は控えめに

---
最終更新: 2025-08-09
更新者: Claude + natatekoko