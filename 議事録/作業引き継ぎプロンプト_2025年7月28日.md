# 🔄 Claude Code 作業引き継ぎプロンプト

## 📅 作業日時
2025年7月28日 - PC再起動前の状況

---

## 🎯 現在の作業状況

### プロジェクト概要
- **プロジェクト名**: caropii（栄養管理アプリ）
- **作業内容**: 筋トレ記録機能と体組成記録機能の実装
- **開発環境**: iOS SwiftUI + Rails 8.0.2バックエンド

### 現在のGit状況
```bash
# 現在のコミット
git log --oneline -1
# 89c0222 体側系記録のフォーマット作成

# プロジェクトディレクトリ
cd /Users/natatekoko/新開発ファイル/caropii
```

---

## ✅ 完了済み機能

### 1. ホーム画面構成
- **HomeView.swift**: 4つのボタン配置済み
  - 今日の記録をする
  - データを管理  
  - 睡眠データ取得テスト
  - 筋トレ記録（追加済み）

### 2. 選択画面
- **WorkoutSelectionView.swift**: 2択画面作成済み
  - 筋トレ記録ボタン（オレンジ、ダンベルアイコン）
  - 体測定記録ボタン（シアン、体重計アイコン）

### 3. 体測定記録画面
- **BodyMeasurementView.swift**: 完全実装済み
  - 基本9項目入力フォーム（身長、体重、体脂肪率、筋肉量、推定骨量、内臓脂肪レベル、基礎代謝、体内年齢、体水分率）
  - 空欄確認ダイアログ
  - 単位表示付き
  - スクロール対応

---

## ⚠️ 現在の課題・問題

### 1. 筋トレ記録画面の未実装
- **WorkoutRecordView.swift**: ファイルが存在しない
- WorkoutSelectionView.swiftで参照されているが実体がない
- これが原因で筋トレ記録ボタンでクラッシュする可能性

### 2. 解決済みの問題
- **Xcodeブレークポイント**: ⌘Y（全ブレークポイント無効化）で解決済み
- **eligibility.plistエラー**: iOS Simulatorのノイズ（無視OK）

---

## 🚀 次に実装すべき機能

### 筋トレ記録画面の仕様（要求済み）
```
UI構成：
[種目名] [50kg] [右▼] [5][5][5][+] ← 1行レイアウト
[種目名] [50kg] [右▼] [5][5][5][+] ← 1行レイアウト
...（10行まで初期表示）
[種目を追加] ← スクロール最下部
---固定ライン---
[今日の記録として保存] ← 画面下部固定
```

**詳細仕様**:
- 種目名：自由入力（サジェスト機能は後日）
- 重量：kg単位、数値入力
- 左右選択：空欄・右・左のみ（両方は削除）
- セット数：初期3セット、プラスで最大10セットまで
- 削除：左スワイプまたは長押しで削除メニュー
- 保存：確認ダイアログ付き

---

## 📂 ファイル構成（現在）

### 存在するファイル
```
ios/pfcz/
├── HomeView.swift （4つのボタン）
├── WorkoutSelectionView.swift （2択画面）
├── BodyMeasurementView.swift （体測定入力画面）
├── SaveViewDebug.swift （食事記録画面）
└── APIService.swift （Rails通信用）
```

### 作成が必要なファイル
```
ios/pfcz/
└── WorkoutRecordView.swift （筋トレ記録入力画面）
```

---

## 🛠 技術的メモ

### SwiftUI構造体例
```swift
struct WorkoutRecordView: View {
    var body: some View {
        // 実装が必要
    }
}
```

### 注意点
- NavigationLinkの遷移先は事前にファイル作成が必要
- ブレークポイント（青い丸）が残っていると⌘Yで無効化
- .gitignoreに `*.xcuserstate` と `xcuserdata/` を追加推奨

---

## 🎯 作業再開手順

### 1. 状況確認
```bash
cd /Users/natatekoko/新開発ファイル/caropii
git status
git log --oneline -3
```

### 2. 筋トレ記録画面作成
```bash
# WorkoutRecordView.swiftファイル作成
# 1行レイアウトの筋トレ入力フォーム実装
```

### 3. 動作確認
- ホーム → 筋トレ記録 → 筋トレ記録 → 筋トレ記録画面
- 体測定記録も正常動作確認

### 4. 今後の拡張
- 前回記録自動表示機能
- 種目サジェスト機能
- Rails API連携

---

## 📋 TODO状況

### High Priority (高)
- [ ] 筋トレ記録画面の実装
- [ ] 筋トレ記録機能のデータベース設計  
- [ ] 体重・体脂肪率・筋肉量記録機能追加
- [ ] Rails分析後データ自動削除機能実装
- [ ] 統合APIルート追加（type指定式）

### Medium Priority (中)
- [ ] 前回記録自動表示機能
- [ ] 種目サジェスト機能実装
- [ ] ヘルスケア同期方式への移行設計

---

## 💡 ユーザー要求の重要ポイント

1. **段階的実装**: 小刻みに確認を取りながら進める
2. **1行レイアウト**: 種目・重量・左右・セット数を1行に配置
3. **固定保存ボタン**: 画面下部に固定、スクロールしない
4. **確認ダイアログ**: 保存時に必ず確認を取る
5. **左スワイプ削除**: 各種目行で左スワイプ削除機能

---

**作業再開時の最初のメッセージ例**:
「筋トレ記録機能の実装を継続します。現在はWorkoutRecordView.swiftファイルの作成から始める必要があります。1行レイアウトでの入力フォーム実装を行いましょうか？」